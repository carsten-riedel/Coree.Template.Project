<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Coree Project Template</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<style>
    /* Media query for larger screens (e.g., desktop) */
    @media (min-width: 992px) {
        .container {
            max-width: 800px; /* Adjust this value as needed */
			
        }
    }
	
	.container {
        border: 1px solid rgb(216, 222, 228); /* Thin border, change color as needed */
        border-radius: 5px; /* Rounded corners, adjust radius as desired */
        padding: 32px;
    }
	
	img {
		max-width: 100%;
	}
	
	h1, h2 {
        border-bottom: 1px solid rgb(216, 222, 228); /* Solid line, adjust color and thickness as needed */
		padding-bottom: 0.3em
    }

    .codeblocks {
		background: rgb(246, 248, 250);
		margin: 1em 0px;
		display: flex;
		align-items: start; /* Aligns items to the top of the container */
		border-radius: 6px;
		}
	
	li code {
		background: rgb(246, 248, 250);
		color: black;
		padding-left: 0.4em;
		padding-top: 0.2em;
		padding-bottom: 0.2em;
		padding-right: 0.4em;
		border-radius: 6px;
	}

    .copy-button {
        cursor: pointer;
        color: black;
        border: none;
        border-radius: 3px;
        font-size: 14px;
        margin: 0.5em;
        background: rgb(246, 248, 250);
		user-select: none;
    }

    pre {
	    margin: 0px;
		padding: 10px;
        white-space: pre; /* Keeps natural line breaks */
        overflow-x: auto; /* Adds horizontal scrollbar if needed */
        flex: 1; /* Allows pre to take up available space */
    } 
</style>


</head>
<body>
  <div id="barea">
    <button onclick="fetchContentRelativeRooted('test.md')">Fetch Content</button>
  </div>
  <div id="content" class="container"></div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
  <script>
    const md = new markdownit();
 
    function fetchContentRelativeRooted(relativePath) {
    // Manually set root URL
    var rootUrl = 'https://raw.githubusercontent.com/carsten-riedel/Coree.Template.Project/main/docs/';

    // Default to 'index.md' if relativePath is empty or undefined
    if (!relativePath) {
        relativePath = 'index.md';
    }

    // Construct the full URL
    var fullUrl = rootUrl + relativePath;

    // Fetch and display the content
    fetchContent(fullUrl);
}

function fetchContentRelative(relativePath) {
    // Get the current URL
    var currentLocation = window.location.href;

    // Create a URL object
    var url = new URL(currentLocation);

    // Get the pathname and remove the trailing slash if it exists
    var path = url.pathname.replace(/\/$/, "");

    // Remove the last segment (file name or last directory name)
    var currentDir = path.substring(0, path.lastIndexOf('/'));

    // Construct the full URL using the current directory and relative path
    var baseUrl = `${currentDir}/${relativePath}`;

    // Log the base URL to the console
    console.log("Base URL:", baseUrl);

    // Fetch and display the content
    fetchContent(baseUrl);
}


	function fetchContent(url) {
		fetch(url)
			.then(response => response.text())
			.then(markdown => {
				const content = document.getElementById('content');
				content.innerHTML = md.render(markdown);
				addCopyButtons(content);
			})
			.catch(error => console.error('Error loading markdown:', error));
	}

	function addCopyButtons(container) {
    container.querySelectorAll('pre').forEach(function(pre) {
        // Create the div wrapper and set its class
        var divWrapper = document.createElement('div');
        divWrapper.className = 'codeblocks'; // Replace with your desired class name

        // Move the pre element inside the div wrapper
        pre.parentNode.insertBefore(divWrapper, pre);
        divWrapper.appendChild(pre);

        // Create and add the copy button
        var button = document.createElement('button');
        button.className = 'copy-button';
        button.textContent = 'Copy';

        // Append the button to the div wrapper, not the pre element
        divWrapper.appendChild(button);

        var code = pre.querySelector('code'); // Targeting the code element

        button.addEventListener('click', function() {
            var textToCopy = code ? code.textContent.trim() : pre.textContent.trim();
            navigator.clipboard.writeText(textToCopy).then(function() {
                /* Clipboard successfully set */
                button.textContent = 'Done';
                setTimeout(function() { button.textContent = 'Copy'; }, 1000);
            }, function() {
                /* Clipboard write failed */
                button.textContent = 'Failed to copy';
            });
        });
    });

    $(document).ready(function() {
        // Fetch default content on page load
        fetchContentRelativeRooted('index.md');
    });

}

  </script>

</body>
</html>
